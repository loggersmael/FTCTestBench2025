var se=t=>{throw TypeError(t)};var oe=(t,e,s)=>e.has(t)||se("Cannot "+s);var i=(t,e,s)=>(oe(t,e,"read from private field"),s?s.call(t):e.get(t)),o=(t,e,s)=>e.has(t)?se("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s);import{a8 as h,o as l,Y as de,aE as g,w as M,t as ce,p as ue,l as ie,c as he}from"./DLBbvs7e.js";import{a as d,p as x}from"./Bs98DhGR.js";import{n as $,i as ge,a as fe,b as F,T as k}from"./C6cb6eoe.js";import{n as ae,b as le}from"./AckLZTS8.js";import{T as me}from"./ByHq7xfg.js";import"./CH324CeG.js";function We(t){var e=de(0);return function(){return arguments.length===1?(h(e,l(e)+1),arguments[0]):(l(e),t())}}const u=[];for(let t=0;t<256;++t)u.push((t+256).toString(16).slice(1));function pe(t,e=0){return(u[t[e+0]]+u[t[e+1]]+u[t[e+2]]+u[t[e+3]]+"-"+u[t[e+4]]+u[t[e+5]]+"-"+u[t[e+6]]+u[t[e+7]]+"-"+u[t[e+8]]+u[t[e+9]]+"-"+u[t[e+10]]+u[t[e+11]]+u[t[e+12]]+u[t[e+13]]+u[t[e+14]]+u[t[e+15]]).toLowerCase()}let Q;const ye=new Uint8Array(16);function xe(){if(!Q){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Q=crypto.getRandomValues.bind(crypto)}return Q(ye)}const Me=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),re={randomUUID:Me};function y(t,e,s){var a;if(re.randomUUID&&!t)return re.randomUUID();t=t||{};const r=t.random??((a=t.rng)==null?void 0:a.call(t))??xe();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,pe(r)}const He=["OpMode Control","Gamepad","Field","Telemetry","Configurables","Graph","Capture","LL Dash","LL Feed","Test"];var ve=(t=>(t.CONTROLS="OpMode Control",t.GAMEPAD="Gamepad",t.FIELD="Field",t.TELEMETRY="Telemetry",t.CONFIGURABLES="Configurables",t.GRAPH="Graph",t.CAPTURE="Capture",t.LIMELIGHT_DASH="LL Dash",t.LIMELIGHT_FEED="LL Feed",t.TEST="Test",t))(ve||{});function Ie(){return{id:y(),name:"Default",x:10,y:10,modules:[{id:y(),type:"OpMode Control",start:{x:1,y:1},sizes:{x:3,y:2}},{id:y(),type:"Capture",start:{x:1,y:3},sizes:{x:3,y:4}},{id:y(),type:"Gamepad",start:{x:1,y:7},sizes:{x:3,y:4}},{id:y(),type:"Field",start:{x:4,y:1},sizes:{x:3,y:4}},{id:y(),type:"Telemetry",start:{x:4,y:5},sizes:{x:3,y:2}},{id:y(),type:"Graph",start:{x:4,y:7},sizes:{x:3,y:4}},{id:y(),type:"Configurables",start:{x:7,y:1},sizes:{x:4,y:6}},{id:y(),type:"LL Feed",start:{x:7,y:7},sizes:{x:4,y:2}},{id:y(),type:"LL Dash",start:{x:7,y:9},sizes:{x:4,y:2}}]}}var A,E,G,O,V,N,S,b,B,W,z,H,j;const ee=class ee{constructor(e){o(this,A,g(8));o(this,E,g(6));o(this,G,g("Default"));o(this,O,g(""));o(this,V,g(!1));o(this,N,g(-1));o(this,S,g(-1));o(this,b,g(""));o(this,B,M(()=>this.getWidgetById(this.selectedWidgetId)));o(this,W,M(()=>this.checkPlace(this.selectedWidget)));o(this,z,g(d([])));o(this,H,M(()=>this.updateMap(this.modules)));o(this,j,M(()=>{var e=0;for(const s of this.modules)e+=s.sizes.x*s.sizes.y;return e}));e==null&&(e=Ie()),this.id=e.id,this.name=e.name,this.cellsX=e.x,this.cellsY=e.y,this.modules=e.modules}get cellsX(){return l(i(this,A))}set cellsX(e){h(i(this,A),d(e))}get cellsY(){return l(i(this,E))}set cellsY(e){h(i(this,E),d(e))}get name(){return l(i(this,G))}set name(e){h(i(this,G),d(e))}get id(){return l(i(this,O))}set id(e){h(i(this,O),d(e))}get isMoving(){return l(i(this,V))}set isMoving(e){h(i(this,V),d(e))}get selectedCellX(){return l(i(this,N))}set selectedCellX(e){h(i(this,N),d(e))}get selectedCellY(){return l(i(this,S))}set selectedCellY(e){h(i(this,S),d(e))}get selectedWidgetId(){return l(i(this,b))}set selectedWidgetId(e){h(i(this,b),d(e))}get selectedWidget(){return l(i(this,B))}get canPlace(){return l(i(this,W))}checkIndex(e){return this.coreCheckPlace(e%this.cellsX+1,Math.floor(e/this.cellsX)+1,this.selectedWidget)}coreCheckPlace(e,s,r){if(r==null)return!1;for(let a=0;a<r.sizes.x;a++)for(let n=0;n<r.sizes.y;n++){const c=e+a,m=s+n;if(c>this.cellsX||m>this.cellsY||c<1||m<1||this.modulesMap[m][c]!=null&&this.modulesMap[m][c]!=r.id)return!1}return!0}checkPlace(e){return this.coreCheckPlace(this.selectedCellX,this.selectedCellY,e)}getWidgetById(e){for(const s of this.modules)if(s.id==e)return s;return null}get modules(){return l(i(this,z))}set modules(e){h(i(this,z),d(e))}get modulesMap(){return l(i(this,H))}updateMap(e){let s=0,r=0;for(const n of e)s=Math.max(s,n.start.x+n.sizes.x),r=Math.max(r,n.start.y+n.sizes.y);const a=[];for(let n=1;n<this.cellsY+1;n++){a[n]=[];for(let c=1;c<this.cellsX+1;c++)a[n][c]=null}for(const n of e)for(let c=0;c<n.sizes.x;c++)for(let m=0;m<n.sizes.y;m++){const I=n.start.x+c,w=n.start.y+m;a[w][I]=n.id}return console.table(a),a}get countCells(){return l(i(this,j))}startMoving(e){this.isMoving=!0,this.selectedWidgetId=e;for(const s of this.modules)s.id==e&&(this.selectedCellX=s.start.x-1,this.selectedCellY=s.start.y-1)}stopMoving(e){e!=""&&e!=null&&$.add(e),this.isMoving=!1,this.selectedWidgetId=""}performMove(){if(this.selectedWidget!=null)for(const e of this.modules)e.id==this.selectedWidgetId&&(e.start.x=this.selectedCellX,e.start.y=this.selectedCellY)}canExpand(e,s,r){var I,w,L,te;const{x:a,y:n}=e.start,{x:c,y:m}=e.sizes;if(s===1)for(let f=0;f<m;f++){const v=n+f,p=a+c;if(p>this.cellsX||((I=this.modulesMap[v])==null?void 0:I[p])!==null)return!1}else if(s===-1)for(let f=0;f<m;f++){const v=n+f,p=a-1;if(p<1||((w=this.modulesMap[v])==null?void 0:w[p])!==null)return!1}else if(r===1)for(let f=0;f<c;f++){const v=a+f,p=n+m;if(p>this.cellsY||((L=this.modulesMap[p])==null?void 0:L[v])!==null)return!1}else if(r===-1)for(let f=0;f<c;f++){const v=a+f,p=n-1;if(p<1||((te=this.modulesMap[p])==null?void 0:te[v])!==null)return!1}return!0}remove(e){this.modules=this.modules.filter(s=>s.id!=e)}addNew(e,s){if(this.modulesMap[s][e]!=null){$.add("Slot is already in use.");return}this.modules.push({id:y(),type:"Test",start:{x:e,y:s},sizes:{x:1,y:1}})}canExpandRight(e){return this.canExpand(e,1,0)}canExpandLeft(e){return this.canExpand(e,-1,0)}canExpandDown(e){return this.canExpand(e,0,1)}canExpandUp(e){return this.canExpand(e,0,-1)}static fromJSON(e){return new ee(e)}toJSON(){return{id:this.id,name:this.name,x:this.cellsX,y:this.cellsY,modules:this.modules}}};A=new WeakMap,E=new WeakMap,G=new WeakMap,O=new WeakMap,V=new WeakMap,N=new WeakMap,S=new WeakMap,b=new WeakMap,B=new WeakMap,W=new WeakMap,z=new WeakMap,H=new WeakMap,j=new WeakMap;let C=ee;function R(t,e,s=31536e3){document.cookie=`${t}=${e}; path=/; max-age=${s}`}function D(t){const e=document.cookie.match(new RegExp(`(?:^|; )${t.replace(/([.$?*|{}()[]\/+^])/g,"\\$1")}=([^;]*)`));return e?decodeURIComponent(e[1]):null}function we(t){document.cookie=`${t}=; path=/; max-age=0`}var X,_,P,T,U,Y,J,Z,q,K;class Ce{constructor(){o(this,X,g(D("theme")==="dark"));o(this,_,g(d(D("animations")||"fast")));o(this,P,g(d(D("primary")||"blue")));o(this,T,g(d(!!D("presets"))));o(this,U,g("default"));o(this,Y,g(d(this.getInitialGrids())));o(this,J,g(d(this.getInitialGrids())));o(this,Z,M(()=>JSON.stringify(this.initialGrids)!=JSON.stringify(this.gridManagers)));o(this,q,M(()=>{const e=this.getGridById(this.selectedManagerID);return e??(this.selectedManagerID=this.gridManagers[0].id,this.gridManagers[0])}));o(this,K,M(()=>this.gridManagers.map(e=>e.id)));document.body.classList.toggle("dark-mode",this.isDark),document.body.classList.add(this.animationSpeed)}get isDark(){return l(i(this,X))}set isDark(e){h(i(this,X),d(e))}get animationSpeed(){return l(i(this,_))}set animationSpeed(e){h(i(this,_),d(e))}get primaryColor(){return l(i(this,P))}set primaryColor(e){h(i(this,P),d(e))}toggleIsDark(){this.isDark=!this.isDark,document.body.classList.toggle("dark-mode",this.isDark),R("theme",this.isDark?"dark":"light")}setSpeed(e){document.body.classList.remove(this.animationSpeed),this.animationSpeed=e,document.body.classList.add(this.animationSpeed),R("animations",e)}setPrimaryColor(e){document.body.classList.remove(this.primaryColor),this.primaryColor=e,document.body.classList.add(this.primaryColor),R("primary",this.primaryColor)}getInitialGrids(){const e=D("presets"),s=e?JSON.parse(e):[null],r=[];for(const[a,n]of Object.entries(s))r.push(C.fromJSON(n));return r.length<1?[new C(null)]:r}resetPresets(){this.selectedManagerID="default",we("presets"),this.gridManagers=[new C(null)],this.initialGrids=[new C(null)],this.hasPresets=!1,ge.showEdit=!1}removePreset(e){if(this.gridManagers.length==1){$.add("Cannot remove last preset.");return}this.gridManagers=this.gridManagers.filter(s=>s.id!=e)}get hasPresets(){return l(i(this,T))}set hasPresets(e){h(i(this,T),d(e))}get selectedManagerID(){return l(i(this,U))}set selectedManagerID(e){h(i(this,U),d(e))}get initialGrids(){return l(i(this,Y))}set initialGrids(e){h(i(this,Y),d(e))}get gridManagers(){return l(i(this,J))}set gridManagers(e){h(i(this,J),d(e))}get isGridEdited(){return l(i(this,Z))}getGridById(e){for(const s of this.gridManagers)if(s.id==e)return s;return null}get currentGrid(){return l(i(this,q))}savePresets(){const e=this.gridManagers.map(s=>s.toJSON());R("presets",JSON.stringify(e)),this.hasPresets=!0,this.initialGrids=this.gridManagers}get allIDs(){return l(i(this,K))}}X=new WeakMap,_=new WeakMap,P=new WeakMap,T=new WeakMap,U=new WeakMap,Y=new WeakMap,J=new WeakMap,Z=new WeakMap,q=new WeakMap,K=new WeakMap;const je=new Ce;var Le=ae('<svg width="100%" height="100%" viewBox="0 0 11 7" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;"><path d="M9.072,0.031l0.335,0.001c0.32,0.001 0.608,0.193 0.733,0.488c0.125,0.295 0.063,0.635 -0.159,0.866l-4.287,4.465c-0.15,0.157 -0.359,0.245 -0.577,0.245c-0.217,0 -0.426,-0.088 -0.577,-0.245l-4.317,-4.497c-0.222,-0.232 -0.285,-0.574 -0.158,-0.869c0.126,-0.295 0.417,-0.486 0.738,-0.485l0.331,0.001l3.406,3.547c0.151,0.158 0.36,0.246 0.577,0.246c0.218,0 0.427,-0.088 0.577,-0.246l3.378,-3.517Z" class="svelte-17tzrkq"></path></svg>');function Ze(t,e){let s=x(e,"isVertical",3,!0);var r=Le();let a;ce(n=>a=fe(r,0,"svelte-17tzrkq",null,a,n),[()=>({opened:e.isOpened,vertical:s()})]),le(t,r)}function qe(t,e){ue(e,!0);let s=x(e,"currentValue",15),r=x(e,"isValid",15),a=x(e,"value",15),n=x(e,"validate",3,L=>!0),c=x(e,"extraChar",3,""),m=x(e,"type",3,""),I=x(e,"alwaysValid",3,!1);ie(()=>{a()==null&&(a(e.startValue),r(n()(a())))}),ie(()=>{if(F.state=="closed"||F.state=="opened"){if(!n()(a())){r(!1);return}r(!0)}});const w=M(()=>r()||F.state=="opened"||I());me(t,{get type(){return m()},oninput:()=>{if(!n()(a())){r(!1);return}r(!0),s(a())},get isValid(){return l(w)},get extraChar(){return c()},get text(){return a()},set text(L){a(L)}}),he()}const ke=-2147483648,De=2147483647,Ae=BigInt("-9223372036854775808"),Ee=BigInt("9223372036854775807"),Ge=-34e37,Oe=34e37,Ve=-17e307,Ne=17e307;function Se(t){for(const s of t)if(!["0","1","2","3","4","5","6","7","8","9"].includes(s))return!1;const e=parseInt(t,10);return isNaN(e)?!1:e>=ke&&e<=De}function be(t){for(const s of t)if(!["0","1","2","3","4","5","6","7","8","9"].includes(s))return!1;const e=BigInt(t);return e>=Ae&&e<=Ee}function ze(t){var e=!1;for(const r of t){if(!["0","1","2","3","4","5","6","7","8","9","."].includes(r))return!1;if(r==".")if(!e)e=!0;else return!1}const s=parseFloat(t);return isNaN(s)?!1:s>=Ve&&s<=Ne}function Xe(t){var e=!1;for(const r of t){if(!["0","1","2","3","4","5","6","7","8","9","."].includes(r))return!1;if(r==".")if(!e)e=!0;else return!1}const s=parseFloat(t);return isNaN(s)?!1:s>=Ge&&s<=Oe}function ne(t){return typeof t=="string"}function _e(t){return!1}function Ke(t){if(F.state=="closed")return _e;switch(t){case k.INT:return Se;case k.LONG:return be;case k.DOUBLE:return ze;case k.FLOAT:return Xe;case k.STRING:return ne;default:return ne}}var Pe=ae('<svg width="100%" height="100%" viewBox="0 0 11 11" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;" class="svelte-914g2"><g><path d="M9.965,10.623c-0.141,0.142 -0.37,0.142 -0.511,0c-1.369,-1.369 -7.829,-7.829 -9.198,-9.198c-0.142,-0.141 -0.142,-0.37 -0,-0.512c0.195,-0.195 0.462,-0.462 0.657,-0.657c0.142,-0.142 0.371,-0.142 0.512,-0c1.369,1.369 7.829,7.829 9.198,9.198c0.142,0.141 0.142,0.37 0,0.511c-0.195,0.196 -0.462,0.463 -0.658,0.658Z" class="svelte-914g2"></path><path d="M0.256,9.965c-0.142,-0.141 -0.142,-0.37 -0,-0.511c1.369,-1.369 7.829,-7.829 9.198,-9.198c0.141,-0.142 0.37,-0.142 0.511,-0c0.196,0.195 0.463,0.462 0.658,0.657c0.142,0.142 0.142,0.371 0,0.512c-1.369,1.369 -7.829,7.829 -9.198,9.198c-0.141,0.142 -0.37,0.142 -0.512,0c-0.195,-0.195 -0.462,-0.462 -0.657,-0.658Z" class="svelte-914g2"></path></g></svg>');function Qe(t){var e=Pe();le(t,e)}export{Ze as A,C as G,Qe as R,qe as S,ve as W,ne as a,Ke as b,He as c,Ie as d,We as r,je as s};
