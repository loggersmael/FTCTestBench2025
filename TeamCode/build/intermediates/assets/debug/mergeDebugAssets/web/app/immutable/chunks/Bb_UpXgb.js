var q=Object.defineProperty;var J=(e,t,i)=>t in e?q(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var w=(e,t,i)=>J(e,typeof t!="symbol"?t+"":t,i);import{d as G,f as Z,t as E,b as D}from"./DgPgYHzS.js";import{b as $,h as R,a as H,n as ee,k as L,K as te,aw as ne,av as ae,s as ie,g as se,G as le,aF as re,u as oe,r as ce,Q as Y,_ as A,U as fe,W as b,T as M,X as g,V as he,d as de,a2 as ue,R as U}from"./DxySB33y.js";import{b as W}from"./CkQRefwj.js";import{o as z}from"./DyQLA_-o.js";import{S as ve,i as m}from"./CdgVfM5E.js";import{T as we}from"./CKoJmzFz.js";import{l as pe,d as O,s as me}from"./DG_-0HLc.js";import{r as xe}from"./B8qkImnQ.js";import{p as x}from"./DQEzFBYC.js";function _e(e,t,i,s,l){var n=e,o="",c;$(()=>{if(o===(o=t()??"")){R&&H();return}c!==void 0&&(le(c),c=void 0),o!==""&&(c=ee(()=>{if(R){L.data;for(var h=H(),v=h;h!==null&&(h.nodeType!==8||h.data!=="");)v=h,h=te(h);if(h===null)throw ne(),ae;G(L,v),n=ie(h);return}var _=o+"",p=Z(_);G(se(p),p.lastChild),n.before(p)}))})}function ye(e,t,i=t){var s=re();pe(e,"input",l=>{var n=l?e.defaultValue:e.value;if(n=T(e)?S(n):n,i(n),s&&n!==(n=t())){var o=e.selectionStart,c=e.selectionEnd;e.value=n??"",c!==null&&(e.selectionStart=o,e.selectionEnd=Math.min(c,e.value.length))}}),(R&&e.defaultValue!==e.value||oe(t)==null&&e.value)&&i(T(e)?S(e.value):e.value),ce(()=>{var l=t();T(e)&&l===S(e.value)||e.type==="date"&&!l&&!e.value||l!==e.value&&(e.value=l??"")})}function T(e){var t=e.type;return t==="number"||t==="range"}function S(e){return e===""?null:+e}O(["click"]);var be=(e,t,i)=>{t(),i()()},ge=E('<div class="flex svelte-2iw5vb"><input type="text" autocorrect="off" spellcheck="false" class="svelte-2iw5vb"> <span class="extra svelte-2iw5vb"> </span></div>'),ke=E('<!> <span class="helper svelte-2iw5vb"><!></span>',1);function Oe(e,t){Y(t,!0);let i=x(t,"text",15),s=x(t,"extraChar",3,""),l=x(t,"type",3,""),n=x(t,"isValid",3,!0),o=x(t,"oninput",3,()=>{}),c=x(t,"alwaysValid",3,!1);z(()=>{h()});function h(){_.style.width=Math.max(v.offsetWidth+2,100)+"px"}A(()=>{var d;((d=i())==null?void 0:d.length)>0||h()});let v,_;var p=ke(),V=fe(p);const K=ue(()=>n()||c());we(V,{get type(){return l()},get isValid(){return de(K)},children:(d,Ve)=>{var P=ge(),y=b(P);xe(y),y.__input=[be,h,o],W(y,j=>_=j,()=>_);var F=M(y,2),Q=b(F,!0);g(F),g(P),he(()=>me(Q,s())),ye(y,i),D(d,P)},$$slots:{default:!0}});var I=M(V,2),N=b(I);_e(N,()=>{var d;return(d=i())==null?void 0:d.replaceAll(" ","&nbsp;")}),g(I),W(I,d=>v=d,()=>v),D(e,p),U()}O(["input"]);class r{constructor(t,i){w(this,"inches");w(this,"pixels");if(this.inches=t,i!==void 0)this.pixels=i;else{const s=u.pixels/u.inches;this.pixels=this.inches*s}}}const u=new r(24*6,1024),C=new r(24*6,1024);class f{constructor(t,i){w(this,"fieldX");w(this,"fieldY");w(this,"x");w(this,"y");this.fieldX=t,this.fieldY=i;const s=u.pixels/u.inches;this.x=this.fieldX*s,this.y=this.fieldY*-s}static withData(t){return new f(t.x,t.y)}}let a;function Ie(e){if(!e)return;const t=window.devicePixelRatio||1,i=u.pixels*t,s=C.pixels*t;e.width=i,e.height=s,a=e.getContext("2d"),a&&a.scale(t,t),a&&a.translate(u.pixels/2,C.pixels/2)}function Pe(e){a!=null&&a.moveTo(e.x,e.y)}function k(e,t,i="red",s=new r(.03)){a!=null&&(a.beginPath(),Pe(e),a.lineTo(t.x,t.y),a.strokeStyle=i,a.lineWidth=s.pixels,a.stroke(),a.closePath())}function B(e,t="blue",i=3){a!=null&&(a.beginPath(),a.arc(e.x,e.y,i,0,2*Math.PI),a.fillStyle=t,a.fill(),a.closePath())}function Te(e,t){const i=u.pixels/u.inches,s=t*i;e.font=`${s}px Arial`}function Se(e,t="#333",i="#fff"){if(a==null)return;a.strokeStyle=t,a.lineWidth=1,a.fillStyle=i,Te(a,3);const s=new r(u.inches/2),l=new r(C.inches/2);for(let n=-s.inches;n<=s.inches;n+=e.inches){k(new f(n,-l.inches),new f(n,l.inches),t,new r(.01));for(let o=-l.inches;o<=l.inches;o+=e.inches){const c=new f(n,o);B(c,"white",2),a.fillText(`(${n}", ${o}")`,c.x+5,c.y+5)}}for(let n=-l.inches;n<=l.inches;n+=e.inches)k(new f(-s.inches,n),new f(s.inches,n),t,new r(.01))}async function De(e){const i=await(await fetch(e)).blob();return new Promise((s,l)=>{const n=new FileReader;n.onloadend=()=>s(n.result),n.onerror=l,n.readAsDataURL(i)})}async function Re(e){const t=new Image;return t.src=e,await t.decode(),t}function X(e,t,i,s){e!=null&&a!=null&&(a.save(),a.drawImage(e,t.x,t.y,i.pixels,s.pixels),a.restore())}function We(e,t,i="blue",s="black",l=new r(.02)){a!=null&&(a.beginPath(),a.arc(e.x,e.y,t.pixels,0,2*Math.PI),a.fillStyle=i,a.fill(),a.strokeStyle=s,a.lineWidth=l.pixels,a.stroke(),a.closePath())}function Ce(e,t,i,s="green",l="black",n=new r(.02)){if(a==null)return;const o=new f(e.fieldX-t.inches/2,e.fieldY-i.inches/2);a.beginPath(),a.fillStyle=s,a.fillRect(o.x,o.y,t.pixels,i.pixels),a.strokeStyle=l,a.lineWidth=n.pixels,a.strokeRect(o.x,o.y,t.pixels,i.pixels),a.closePath()}var Ee=E('<div style="width: 100%; overflow: hidden;"><canvas class="svelte-13trz2u"></canvas></div>');function Be(e,t){Y(t,!0);let i,s,l;z(async()=>{Ie(i),s=await De("/fields/field.png"),l=await Re(s),X(l,new f(-72,72),new r(24*6),new r(24*6)),k(new f(0,0),new f(0,10),"blue",new r(1)),Se(new r(24)),B(new f(0,0))}),A(()=>{X(l,new f(-72,72),new r(24*6),new r(24*6)),m.canvas.lines&&m.canvas.lines.forEach(n=>{k(f.withData(n.start),f.withData(n.end),n.look.outlineColor,new r(n.look.outlineWidth))}),m.canvas.rectangles&&m.canvas.rectangles.forEach(n=>{Ce(f.withData(n.center),new r(n.width),new r(n.height),n.look.fillColor,n.look.outlineColor,new r(n.look.outlineWidth))}),m.canvas.circles&&m.canvas.circles.forEach(n=>{We(f.withData(n.center),new r(n.radius),n.look.fillColor,n.look.outlineColor,new r(n.look.outlineWidth))})}),ve(e,{title:"Field",children:(n,o)=>{var c=Ee(),h=b(c);W(h,v=>i=v,()=>i),g(c),D(n,c)},$$slots:{default:!0}}),U()}export{Be as G,Oe as T,ye as b,_e as h};
