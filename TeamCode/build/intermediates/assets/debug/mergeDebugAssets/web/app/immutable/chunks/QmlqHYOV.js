var me=t=>{throw TypeError(t)};var Le=(t,e,s)=>e.has(t)||me("Cannot "+s);var i=(t,e,s)=>(Le(t,e,"read from private field"),s?s.call(t):e.get(t)),o=(t,e,s)=>e.has(t)?me("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s);import{k as ie,m as De,aH as Ae,i as Ee,aI as Ne,a7 as pe,G as ae,L as ue,K as ye,A as W,q as Ge,x as Oe,as as xe,ar as ve,aJ as Me,_ as Se,z as ne,B as le,aE as Ve,ac as f,g as l,aF as m,d as k,t as be,p as ze,a0 as Ie,a as Te}from"./BBgjYgI9.js";import{p as d}from"./DfJRJx6h.js";import{n as he,i as Xe,s as Z,T as A}from"./tJxxZE1I.js";import{n as _e,a as ke}from"./C0BVGdWH.js";import{s as Pe}from"./D0cTJFND.js";import{p as _}from"./CYCzoG9_.js";import{T as Ue}from"./saTlCpdM.js";import"./Cg448cDv.js";const oe=0,j=1,de=2;function vt(t,e,s,r,n){ie&&De();var a=t,c=Ae(),g=Se,p=pe,x,v,w,u=(c?ue:ye)(void 0),M=(c?ue:ye)(void 0),y=!1;function H(C,L){y=!0,L&&(xe(ge),ve(ge),Me(g));try{C===oe&&s&&(x?ne(x):x=W(()=>s(a))),C===j&&r&&(v?ne(v):v=W(()=>r(a,u))),C===de&&n&&(w?ne(w):w=W(()=>n(a,M))),C!==oe&&x&&le(x,()=>x=null),C!==j&&v&&le(v,()=>v=null),C!==de&&w&&le(w,()=>w=null)}finally{L&&(Me(null),ve(null),xe(null),Ve())}}var ge=Ee(()=>{if(p!==(p=e())){if(Ne(p)){var C=p;y=!1,C.then(L=>{C===p&&(ae(u,L),H(j,!0))},L=>{if(C===p&&(ae(M,L),H(de,!0),!n))throw M.v}),ie?s&&(x=W(()=>s(a))):Ge(()=>{y||H(oe,!0)})}else ae(u,p),H(j,!1);return()=>p=pe}});ie&&(a=Oe)}function Mt(t){var e=ue(0);return function(){return arguments.length===1?(f(e,l(e)+1),arguments[0]):(l(e),t())}}const h=[];for(let t=0;t<256;++t)h.push((t+256).toString(16).slice(1));function Je(t,e=0){return(h[t[e+0]]+h[t[e+1]]+h[t[e+2]]+h[t[e+3]]+"-"+h[t[e+4]]+h[t[e+5]]+"-"+h[t[e+6]]+h[t[e+7]]+"-"+h[t[e+8]]+h[t[e+9]]+"-"+h[t[e+10]]+h[t[e+11]]+h[t[e+12]]+h[t[e+13]]+h[t[e+14]]+h[t[e+15]]).toLowerCase()}let ce;const Ye=new Uint8Array(16);function Re(){if(!ce){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");ce=crypto.getRandomValues.bind(crypto)}return ce(Ye)}const Fe=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Ce={randomUUID:Fe};function I(t,e,s){var n;if(Ce.randomUUID&&!t)return Ce.randomUUID();t=t||{};const r=t.random??((n=t.rng)==null?void 0:n.call(t))??Re();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,Je(r)}const It=["OpMode Control","Gamepad","Field","Telemetry","Configurables","Graph","Capture","LL Dash","LL Feed","Test"];var Be=(t=>(t.CONTROLS="OpMode Control",t.GAMEPAD="Gamepad",t.FIELD="Field",t.TELEMETRY="Telemetry",t.CONFIGURABLES="Configurables",t.GRAPH="Graph",t.CAPTURE="Capture",t.LIMELIGHT_DASH="LL Dash",t.LIMELIGHT_FEED="LL Feed",t.TEST="Test",t))(Be||{});function He(){return{id:I(),name:"Default",x:10,y:10,modules:[{id:I(),type:"OpMode Control",start:{x:1,y:1},sizes:{x:3,y:2}},{id:I(),type:"Capture",start:{x:1,y:3},sizes:{x:3,y:4}},{id:I(),type:"Gamepad",start:{x:1,y:7},sizes:{x:3,y:4}},{id:I(),type:"Field",start:{x:4,y:1},sizes:{x:3,y:4}},{id:I(),type:"Telemetry",start:{x:4,y:5},sizes:{x:3,y:2}},{id:I(),type:"Graph",start:{x:4,y:7},sizes:{x:3,y:4}},{id:I(),type:"Configurables",start:{x:7,y:1},sizes:{x:4,y:6}},{id:I(),type:"LL Feed",start:{x:7,y:7},sizes:{x:4,y:2}},{id:I(),type:"LL Dash",start:{x:7,y:9},sizes:{x:4,y:2}}]}}var N,G,O,S,V,b,z,T,K,Q,X,$,ee;const fe=class fe{constructor(e){o(this,N,m(8));o(this,G,m(6));o(this,O,m("Default"));o(this,S,m(""));o(this,V,m(!1));o(this,b,m(-1));o(this,z,m(-1));o(this,T,m(""));o(this,K,k(()=>this.getWidgetById(this.selectedWidgetId)));o(this,Q,k(()=>this.checkPlace(this.selectedWidget)));o(this,X,m(d([])));o(this,$,k(()=>this.updateMap(this.modules)));o(this,ee,k(()=>{var e=0;for(const s of this.modules)e+=s.sizes.x*s.sizes.y;return e}));e==null&&(e=He()),this.id=e.id,this.name=e.name,this.cellsX=e.x,this.cellsY=e.y,this.modules=e.modules}get cellsX(){return l(i(this,N))}set cellsX(e){f(i(this,N),d(e))}get cellsY(){return l(i(this,G))}set cellsY(e){f(i(this,G),d(e))}get name(){return l(i(this,O))}set name(e){f(i(this,O),d(e))}get id(){return l(i(this,S))}set id(e){f(i(this,S),d(e))}get isMoving(){return l(i(this,V))}set isMoving(e){f(i(this,V),d(e))}get selectedCellX(){return l(i(this,b))}set selectedCellX(e){f(i(this,b),d(e))}get selectedCellY(){return l(i(this,z))}set selectedCellY(e){f(i(this,z),d(e))}get selectedWidgetId(){return l(i(this,T))}set selectedWidgetId(e){f(i(this,T),d(e))}get selectedWidget(){return l(i(this,K))}get canPlace(){return l(i(this,Q))}checkIndex(e){return this.coreCheckPlace(e%this.cellsX+1,Math.floor(e/this.cellsX)+1,this.selectedWidget)}coreCheckPlace(e,s,r){if(r==null)return!1;for(let n=0;n<r.sizes.x;n++)for(let a=0;a<r.sizes.y;a++){const c=e+n,g=s+a;if(c>this.cellsX||g>this.cellsY||c<1||g<1||this.modulesMap[g][c]!=null&&this.modulesMap[g][c]!=r.id)return!1}return!0}checkPlace(e){return this.coreCheckPlace(this.selectedCellX,this.selectedCellY,e)}getWidgetById(e){for(const s of this.modules)if(s.id==e)return s;return null}get modules(){return l(i(this,X))}set modules(e){f(i(this,X),d(e))}get modulesMap(){return l(i(this,$))}updateMap(e){let s=0,r=0;for(const a of e)s=Math.max(s,a.start.x+a.sizes.x),r=Math.max(r,a.start.y+a.sizes.y);const n=[];for(let a=1;a<this.cellsY+1;a++){n[a]=[];for(let c=1;c<this.cellsX+1;c++)n[a][c]=null}for(const a of e)for(let c=0;c<a.sizes.x;c++)for(let g=0;g<a.sizes.y;g++){const p=a.start.x+c,x=a.start.y+g;n[x][p]=a.id}return console.table(n),n}get countCells(){return l(i(this,ee))}startMoving(e){this.isMoving=!0,this.selectedWidgetId=e;for(const s of this.modules)s.id==e&&(this.selectedCellX=s.start.x-1,this.selectedCellY=s.start.y-1)}stopMoving(e){e!=""&&e!=null&&he.add(e),this.isMoving=!1,this.selectedWidgetId=""}performMove(){if(this.selectedWidget!=null)for(const e of this.modules)e.id==this.selectedWidgetId&&(e.start.x=this.selectedCellX,e.start.y=this.selectedCellY)}canExpand(e,s,r){var p,x,v,w;const{x:n,y:a}=e.start,{x:c,y:g}=e.sizes;if(s===1)for(let u=0;u<g;u++){const M=a+u,y=n+c;if(y>this.cellsX||((p=this.modulesMap[M])==null?void 0:p[y])!==null)return!1}else if(s===-1)for(let u=0;u<g;u++){const M=a+u,y=n-1;if(y<1||((x=this.modulesMap[M])==null?void 0:x[y])!==null)return!1}else if(r===1)for(let u=0;u<c;u++){const M=n+u,y=a+g;if(y>this.cellsY||((v=this.modulesMap[y])==null?void 0:v[M])!==null)return!1}else if(r===-1)for(let u=0;u<c;u++){const M=n+u,y=a-1;if(y<1||((w=this.modulesMap[y])==null?void 0:w[M])!==null)return!1}return!0}remove(e){this.modules=this.modules.filter(s=>s.id!=e)}addNew(e,s){if(this.modulesMap[s][e]!=null){he.add("Slot is already in use.");return}this.modules.push({id:I(),type:"Test",start:{x:e,y:s},sizes:{x:1,y:1}})}canExpandRight(e){return this.canExpand(e,1,0)}canExpandLeft(e){return this.canExpand(e,-1,0)}canExpandDown(e){return this.canExpand(e,0,1)}canExpandUp(e){return this.canExpand(e,0,-1)}static fromJSON(e){return new fe(e)}toJSON(){return{id:this.id,name:this.name,x:this.cellsX,y:this.cellsY,modules:this.modules}}};N=new WeakMap,G=new WeakMap,O=new WeakMap,S=new WeakMap,V=new WeakMap,b=new WeakMap,z=new WeakMap,T=new WeakMap,K=new WeakMap,Q=new WeakMap,X=new WeakMap,$=new WeakMap,ee=new WeakMap;let D=fe;function q(t,e,s=31536e3){document.cookie=`${t}=${e}; path=/; max-age=${s}`}function E(t){const e=document.cookie.match(new RegExp(`(?:^|; )${t.replace(/([.$?*|{}()[]\/+^])/g,"\\$1")}=([^;]*)`));return e?decodeURIComponent(e[1]):null}function We(t){document.cookie=`${t}=; path=/; max-age=0`}var P,U,J,Y,R,F,B,te,se,re;class je{constructor(){o(this,P,m(E("theme")==="dark"));o(this,U,m(d(E("animations")||"fast")));o(this,J,m(d(E("primary")||"blue")));o(this,Y,m(d(!!E("presets"))));o(this,R,m("default"));o(this,F,m(d(this.getInitialGrids())));o(this,B,m(d(this.getInitialGrids())));o(this,te,k(()=>JSON.stringify(this.initialGrids)!=JSON.stringify(this.gridManagers)));o(this,se,k(()=>{const e=this.getGridById(this.selectedManagerID);return e??(this.selectedManagerID=this.gridManagers[0].id,this.gridManagers[0])}));o(this,re,k(()=>this.gridManagers.map(e=>e.id)));document.body.classList.toggle("dark-mode",this.isDark),document.body.classList.add(this.animationSpeed)}get isDark(){return l(i(this,P))}set isDark(e){f(i(this,P),d(e))}get animationSpeed(){return l(i(this,U))}set animationSpeed(e){f(i(this,U),d(e))}get primaryColor(){return l(i(this,J))}set primaryColor(e){f(i(this,J),d(e))}toggleIsDark(){this.isDark=!this.isDark,document.body.classList.toggle("dark-mode",this.isDark),q("theme",this.isDark?"dark":"light")}setSpeed(e){document.body.classList.remove(this.animationSpeed),this.animationSpeed=e,document.body.classList.add(this.animationSpeed),q("animations",e)}setPrimaryColor(e){document.body.classList.remove(this.primaryColor),this.primaryColor=e,document.body.classList.add(this.primaryColor),q("primary",this.primaryColor)}getInitialGrids(){const e=E("presets"),s=e?JSON.parse(e):[null],r=[];for(const[n,a]of Object.entries(s))r.push(D.fromJSON(a));return r.length<1?[new D(null)]:r}resetPresets(){this.selectedManagerID="default",We("presets"),this.gridManagers=[new D(null)],this.initialGrids=[new D(null)],this.hasPresets=!1,Xe.showEdit=!1}removePreset(e){if(this.gridManagers.length==1){he.add("Cannot remove last preset.");return}this.gridManagers=this.gridManagers.filter(s=>s.id!=e)}get hasPresets(){return l(i(this,Y))}set hasPresets(e){f(i(this,Y),d(e))}get selectedManagerID(){return l(i(this,R))}set selectedManagerID(e){f(i(this,R),d(e))}get initialGrids(){return l(i(this,F))}set initialGrids(e){f(i(this,F),d(e))}get gridManagers(){return l(i(this,B))}set gridManagers(e){f(i(this,B),d(e))}get isGridEdited(){return l(i(this,te))}getGridById(e){for(const s of this.gridManagers)if(s.id==e)return s;return null}get currentGrid(){return l(i(this,se))}savePresets(){const e=this.gridManagers.map(s=>s.toJSON());q("presets",JSON.stringify(e)),this.hasPresets=!0,this.initialGrids=this.gridManagers}get allIDs(){return l(i(this,re))}}P=new WeakMap,U=new WeakMap,J=new WeakMap,Y=new WeakMap,R=new WeakMap,F=new WeakMap,B=new WeakMap,te=new WeakMap,se=new WeakMap,re=new WeakMap;const Ct=new je;var qe=_e('<svg width="100%" height="100%" viewBox="0 0 11 7" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;"><path d="M9.072,0.031l0.335,0.001c0.32,0.001 0.608,0.193 0.733,0.488c0.125,0.295 0.063,0.635 -0.159,0.866l-4.287,4.465c-0.15,0.157 -0.359,0.245 -0.577,0.245c-0.217,0 -0.426,-0.088 -0.577,-0.245l-4.317,-4.497c-0.222,-0.232 -0.285,-0.574 -0.158,-0.869c0.126,-0.295 0.417,-0.486 0.738,-0.485l0.331,0.001l3.406,3.547c0.151,0.158 0.36,0.246 0.577,0.246c0.218,0 0.427,-0.088 0.577,-0.246l3.378,-3.517Z" class="svelte-17tzrkq"></path></svg>');function wt(t,e){let s=_(e,"isVertical",3,!0);var r=qe();let n;be(a=>n=Pe(r,0,"svelte-17tzrkq",null,n,a),[()=>({opened:e.isOpened,vertical:s()})]),ke(t,r)}function _t(t,e){ze(e,!0);let s=_(e,"currentValue",15),r=_(e,"isValid",15),n=_(e,"value",15),a=_(e,"validate",3,v=>!0),c=_(e,"extraChar",3,""),g=_(e,"type",3,""),p=_(e,"alwaysValid",3,!1);Ie(()=>{n()==null&&(n(e.startValue),r(a()(n())))}),Ie(()=>{if(Z.state=="closed"||Z.state=="opened"){if(!a()(n())){r(!1);return}r(!0)}});const x=k(()=>r()||Z.state=="opened"||p());Ue(t,{get type(){return g()},oninput:()=>{if(!a()(n())){r(!1);return}r(!0),s(n())},get isValid(){return l(x)},get extraChar(){return c()},get text(){return n()},set text(v){n(v)}}),Te()}const Ze=-2147483648,Ke=2147483647,Qe=BigInt("-9223372036854775808"),$e=BigInt("9223372036854775807"),et=-34e37,tt=34e37,st=-17e307,rt=17e307;function it(t){for(const s of t)if(!["0","1","2","3","4","5","6","7","8","9"].includes(s))return!1;const e=parseInt(t,10);return isNaN(e)?!1:e>=Ze&&e<=Ke}function at(t){for(const s of t)if(!["0","1","2","3","4","5","6","7","8","9"].includes(s))return!1;const e=BigInt(t);return e>=Qe&&e<=$e}function nt(t){var e=!1;for(const r of t){if(!["0","1","2","3","4","5","6","7","8","9","."].includes(r))return!1;if(r==".")if(!e)e=!0;else return!1}const s=parseFloat(t);return isNaN(s)?!1:s>=st&&s<=rt}function lt(t){var e=!1;for(const r of t){if(!["0","1","2","3","4","5","6","7","8","9","."].includes(r))return!1;if(r==".")if(!e)e=!0;else return!1}const s=parseFloat(t);return isNaN(s)?!1:s>=et&&s<=tt}function we(t){return typeof t=="string"}function ot(t){return!1}function kt(t){if(Z.state=="closed")return ot;switch(t){case A.INT:return it;case A.LONG:return at;case A.DOUBLE:return nt;case A.FLOAT:return lt;case A.STRING:return we;default:return we}}var dt=_e('<svg width="100%" height="100%" viewBox="0 0 11 11" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;" class="svelte-914g2"><g><path d="M9.965,10.623c-0.141,0.142 -0.37,0.142 -0.511,0c-1.369,-1.369 -7.829,-7.829 -9.198,-9.198c-0.142,-0.141 -0.142,-0.37 -0,-0.512c0.195,-0.195 0.462,-0.462 0.657,-0.657c0.142,-0.142 0.371,-0.142 0.512,-0c1.369,1.369 7.829,7.829 9.198,9.198c0.142,0.141 0.142,0.37 0,0.511c-0.195,0.196 -0.462,0.463 -0.658,0.658Z" class="svelte-914g2"></path><path d="M0.256,9.965c-0.142,-0.141 -0.142,-0.37 -0,-0.511c1.369,-1.369 7.829,-7.829 9.198,-9.198c0.141,-0.142 0.37,-0.142 0.511,-0c0.196,0.195 0.463,0.462 0.658,0.657c0.142,0.142 0.142,0.371 0,0.512c-1.369,1.369 -7.829,7.829 -9.198,9.198c-0.141,0.142 -0.37,0.142 -0.512,0c-0.195,-0.195 -0.462,-0.462 -0.657,-0.658Z" class="svelte-914g2"></path></g></svg>');function Lt(t){var e=dt();ke(t,e)}export{wt as A,D as G,Lt as R,_t as S,Be as W,we as a,vt as b,kt as c,He as d,It as e,Mt as r,Ct as s};
