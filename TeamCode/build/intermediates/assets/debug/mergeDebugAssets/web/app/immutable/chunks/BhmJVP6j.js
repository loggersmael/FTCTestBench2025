var g=Object.defineProperty;var k=(n,i,s)=>i in n?g(n,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[i]=s;var f=(n,i,s)=>k(n,typeof i!="symbol"?i+"":i,s);import{t as I,a as b}from"./DXj9G8W9.js";import{o as D,ac as S,w as C,x as W,y as $}from"./7Wps0LQi.js";import{b as T}from"./BKKfl_HC.js";import{o as E}from"./DLDpgE2N.js";import{S as F}from"./DdbbHSKW.js";import"./D2S7bFDF.js";import{d as R}from"./DMoWgvXE.js";import{i as w}from"./EC9FwClP.js";import{C as L}from"./DsOZbpl8.js";R(["click"]);class o{constructor(i,s){f(this,"inches");f(this,"pixels");if(this.inches=i,s!==void 0)this.pixels=s;else{const l=h.pixels/h.inches;this.pixels=this.inches*l}}}const h=new o(24*6,1024),x=new o(24*6,1024);class a{constructor(i,s){f(this,"fieldX");f(this,"fieldY");f(this,"x");f(this,"y");this.fieldX=i,this.fieldY=s;const l=h.pixels/h.inches;this.x=this.fieldX*l,this.y=this.fieldY*-l}static withData(i){return new a(i.x,i.y)}}let e;function _(n){if(!n)return;const i=window.devicePixelRatio||1,s=h.pixels*i,l=x.pixels*i;n.width=s,n.height=l,e=n.getContext("2d"),e&&e.scale(i,i),e&&e.translate(h.pixels/2,x.pixels/2)}function G(n){e!=null&&e.moveTo(n.x,n.y)}function u(n,i,s="red",l=new o(.03)){e!=null&&(e.beginPath(),G(n),e.lineTo(i.x,i.y),e.strokeStyle=s,e.lineWidth=l.pixels,e.stroke(),e.closePath())}function y(n,i="blue",s=3){e!=null&&(e.beginPath(),e.arc(n.x,n.y,s,0,2*Math.PI),e.fillStyle=i,e.fill(),e.closePath())}function H(n,i){const s=h.pixels/h.inches,l=i*s;n.font=`${l}px Arial`}function X(n,i="#333",s="#fff"){if(e==null)return;e.strokeStyle=i,e.lineWidth=1,e.fillStyle=s,H(e,3);const l=new o(h.inches/2),r=new o(x.inches/2);for(let t=-l.inches;t<=l.inches;t+=n.inches){u(new a(t,-r.inches),new a(t,r.inches),i,new o(.01));for(let c=-r.inches;c<=r.inches;c+=n.inches){const d=new a(t,c);y(d,"white",2),e.fillText(`(${t}", ${c}")`,d.x+5,d.y+5)}}for(let t=-r.inches;t<=r.inches;t+=n.inches)u(new a(-l.inches,t),new a(l.inches,t),i,new o(.01))}async function Y(n){const s=await(await fetch(n)).blob();return new Promise((l,r)=>{const t=new FileReader;t.onloadend=()=>l(t.result),t.onerror=r,t.readAsDataURL(s)})}async function M(n){const i=new Image;return i.src=n,await i.decode(),i}function m(n,i,s,l){n!=null&&e!=null&&(e.save(),e.drawImage(n,i.x,i.y,s.pixels,l.pixels),e.restore())}function U(n,i,s="blue",l="black",r=new o(.02)){e!=null&&(e.beginPath(),e.arc(n.x,n.y,i.pixels,0,2*Math.PI),e.fillStyle=s,e.fill(),e.strokeStyle=l,e.lineWidth=r.pixels,e.stroke(),e.closePath())}function A(n,i,s,l="green",r="black",t=new o(.02)){if(e==null)return;const c=new a(n.fieldX-i.inches/2,n.fieldY-s.inches/2);e.beginPath(),e.fillStyle=l,e.fillRect(c.x,c.y,i.pixels,s.pixels),e.strokeStyle=r,e.lineWidth=t.pixels,e.strokeRect(c.x,c.y,i.pixels,s.pixels),e.closePath()}var z=I('<div style="width: 100%; overflow: hidden;"><canvas class="svelte-13trz2u"></canvas></div>');function ie(n,i){D(i,!0);let s,l,r;E(async()=>{_(s),l=await Y("/fields/field.png"),r=await M(l),m(r,new a(-72,72),new o(24*6),new o(24*6)),u(new a(0,0),new a(0,10),"blue",new o(1)),X(new o(24)),y(new a(0,0))}),S(()=>{m(r,new a(-72,72),new o(24*6),new o(24*6)),w.canvas.lines&&w.canvas.lines.forEach(t=>{u(a.withData(t.start),a.withData(t.end),t.look.outlineColor,new o(t.look.outlineWidth))}),w.canvas.rectangles&&w.canvas.rectangles.forEach(t=>{A(a.withData(t.center),new o(t.width),new o(t.height),t.look.fillColor,t.look.outlineColor,new o(t.look.outlineWidth))}),w.canvas.circles&&w.canvas.circles.forEach(t=>{U(a.withData(t.center),new o(t.radius),t.look.fillColor,t.look.outlineColor,new o(t.look.outlineWidth))})}),F(n,{title:"Field",children:(t,c)=>{L(t,{children:(d,B)=>{var p=z(),v=W(p);T(v,P=>s=P,()=>s),$(p),b(d,p)}})},$$slots:{default:!0}}),C()}export{ie as G};
